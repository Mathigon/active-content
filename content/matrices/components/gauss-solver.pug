svg.highlighter.input(:width="(size+2)*40+4" :height="size*40+4+12")
    rect.red(:x="40*(3-size)" :y="(20+40*inRow1)" :width="(size+1)*40" height="36" rx="18" ry="18")
    rect.blue(:x="40*(3-size)" :y="(20+40*inRow2)" :width="(size+1)*40" height="36" rx="18" ry="18" :show="op !== 'multiply'")
svg.highlighter.output(:width="(size+2)*40+4" :height="size*40+4+12")
    rect.red(x="0" :y="(20+40*outRow1)" :width="(size+1)*40" height="36" rx="18" ry="18")
    rect.blue(x="0" :y="(20+40*outRow2)" :width="(size+1)*40" height="36" rx="18" ry="18" :show="op === 'swap'")
.matrix
.operation
  svg.connections-left(width=100 height=120)
    path(:d="'M20,'+(20+40*inRow1)+'C50,'+(20+40*inRow1)+',50,60,80,60'" stroke="#d90000")
    circle(cx=20 :cy="20+40*inRow1" r=8 fill="#d90000")
    path(:d="'M20,'+(20+40*inRow2)+'C50,'+(20+40*inRow2)+',50,60,80,60'" stroke="#0f82f2" :show="op !== 'multiply'")
    circle(cx=20 :cy="20+40*inRow2" r=8 fill="#0f82f2" :show="op !== 'multiply'")
  svg.connections-right(width=100 height=120)
    path(:d="'M20,60C50,60,50,'+(20+40*outRow1)+',80,'+(20+40*outRow1)" stroke="#d90000")
    polygon(:points="'76,'+(20+40*outRow1-8)+' 76,'+(20+40*outRow1+8)+',92,'+(20+40*outRow1)" fill="#d90000")
    path(:d="'M20,60C50,60,50,'+(20+40*outRow2)+',80,'+(20+40*outRow2)" stroke="#0f82f2" :show="op === 'swap'")
    polygon(:points="'76,'+(20+40*outRow2-8)+' 76,'+(20+40*outRow2+8)+' 92,'+(20+40*outRow2)" fill="#0f82f2" :show="op === 'swap'")
  x-select(:bind="op")
    .op(value="multiply") Multiply
    .op(value="add") Add
    .op(value="swap") Swap
  .operation-body
    p(:show="op ==='add'")
      svg(width=16 height=16)
        circle(cx=8 cy=8 r=8 fill="#d90000" :show="op === 'add'")
      | +
      input(:bind="factorString")
      svg(width=16 height=16)
        circle(cx=8 cy=8 r=8 fill="#0f82f2" :show="op === 'add'")
    p(:show="op ==='multiply'")
      | x
      input(:bind="factorString")
    .text
      .description(:show="op ==='multiply'") Multiply a row by a non-zero factor
      .description(:show="op ==='add'") Add a multiple of one row to another
      .description(:show="op ==='swap'") Swap two rows
    .bottom
      button.apply Apply
      button.undo Undo
.matrix